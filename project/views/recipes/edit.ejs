<%- include('../partials/header') %>
<%- include('../partials/navbar', { user: user }) %>

<div class="container">
  <div class="form-container">
    <h1>✏️ Edit Recipe</h1>
    <p>Update your recipe details</p>

    <% if (error) { %>
      <div class="error-message">
        <p>❌ <%= error %></p>
      </div>
    <% } %>

    <form action="/recipes/<%= recipe._id %>/edit" method="POST" class="recipe-form">
      <div class="form-group">
        <label for="title">Recipe Title *</label>
        <input type="text" id="title" name="title" required value="<%= recipe.title %>">
      </div>

      <div class="form-group">
        <label for="description">Description *</label>
        <textarea id="description" name="description" required rows="3"><%= recipe.description %></textarea>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="category">Category *</label>
          <select id="category" name="category" required>
            <option value="Breakfast" <%= recipe.category === 'Breakfast' ? 'selected' : '' %>>Breakfast</option>
            <option value="Lunch" <%= recipe.category === 'Lunch' ? 'selected' : '' %>>Lunch</option>
            <option value="Dinner" <%= recipe.category === 'Dinner' ? 'selected' : '' %>>Dinner</option>
            <option value="Dessert" <%= recipe.category === 'Dessert' ? 'selected' : '' %>>Dessert</option>
            <option value="Snacks" <%= recipe.category === 'Snacks' ? 'selected' : '' %>>Snacks</option>
            <option value="Beverages" <%= recipe.category === 'Beverages' ? 'selected' : '' %>>Beverages</option>
          </select>
        </div>

        <div class="form-group">
          <label for="cookingTime">Cooking Time (minutes) *</label>
          <input type="number" id="cookingTime" name="cookingTime" required min="1" value="<%= recipe.cookingTime %>">
        </div>

        <div class="form-group">
          <label for="difficulty">Difficulty *</label>
          <select id="difficulty" name="difficulty" required>
            <option value="Easy" <%= recipe.difficulty === 'Easy' ? 'selected' : '' %>>Easy</option>
            <option value="Medium" <%= recipe.difficulty === 'Medium' ? 'selected' : '' %>>Medium</option>
            <option value="Hard" <%= recipe.difficulty === 'Hard' ? 'selected' : '' %>>Hard</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="ingredients">Ingredients * (comma-separated)</label>
        <textarea id="ingredients" name="ingredients" required rows="4"><%= recipe.ingredients.join(', ') %></textarea>
        <small>Separate each ingredient with a comma</small>
      </div>

      <div class="form-group">
        <label for="instructions">Instructions *</label>
        <textarea id="instructions" name="instructions" required rows="6"><%= recipe.instructions %></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Update Recipe</button>
        <a href="/recipes/<%= recipe._id %>" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>

<%- include('../partials/footer') %>
